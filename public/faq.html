<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FAQ & Help - CampusVibe</title>
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <!-- SEO: FAQ Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [{
      "@type": "Question",
      "name": "How do I register for an event?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Open the event page from the catalog and click Register. If payment is required, you will see a placeholder. After payment gateway integration, the flow completes automatically."
      }
    }]
  }
  </script>
  <style>
    /* FAQ-specific styles */
    .faq-section { margin-bottom: 2rem; }
    .faq-question { 
      cursor: pointer; padding: 1rem; background: rgba(255,255,255,0.05); 
      border-radius: 8px; margin-bottom: 0.5rem; transition: all 0.2s;
    }
    .faq-question:hover { background: rgba(255,255,255,0.1); }
    .faq-answer { 
      padding: 0 1rem 1rem 1rem; max-height: 1; overflow: hidden; 
      transition: max-height 0.3s ease-out;
    }
    .faq-answer.show { max-height: 200px; padding: 1rem; }
    .faq-answer p { margin: 0; }
    #faq-search { width: 100%; padding: 12px; margin-bottom: 1.5rem; border-radius: 8px; border: 1px solid #ccc; }
    .faq-categories { display: flex; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; }
    .faq-category { 
      padding: 8px 16px; background: rgba(255,255,255,0.1); 
      border-radius: 20px; cursor: pointer; transition: all 0.2s;
    }
    .faq-category.active { background: #007bff; color: white; }
  </style>
  <script src="/assets/js/lottie.min.js"></script>
</head>
<body>
  <!-- Consistent header with dashboard -->
  <header class="cv-header">
    <div class="container header-inner">
      <a href="/" class="brand" style="text-decoration:none;color:inherit">
        <img src="/assets/img/logo.svg" class="logo" alt="CampusVibe" />
        <div class="brand-text">
          <h1>CampusVibe</h1>
          <p class="tagline">Ideal Management, Ideal Moments</p>
        </div>
      </a>
      <nav class="nav">
        <a href="/" class="nav-link">Home</a>
        <a href="/dashboard.html" class="nav-link">Dashboard</a>
        <a href="/login.html" class="btn outline">Login</a>
      </nav>
    </div>
  </header>

  <main class="container" style="padding:24px 0;">
    <div class="card" style="max-width: 900px; margin: 0 auto;">
      <h1 style="text-align: center; margin-bottom: 1rem;">FAQ & Help</h1>
      
      <!-- Search + Animation -->
      <div style="text-align: center; margin-bottom: 2rem;">
        <div id="lottie-faq" style="height:130px; opacity:.6; margin: 0 auto 1rem;"></div>
        <input type="text" id="faq-search" placeholder="Search FAQs... (e.g., payment, ticket, register)" />
      </div>

      <!-- Categories -->
      <div class="faq-categories">
        <div class="faq-category active" data-category="all">All</div>
        <div class="faq-category" data-category="events">Events</div>
        <div class="faq-category" data-category="tickets">Tickets</div>
        <div class="faq-category" data-category="payments">Payments</div>
        <div class="faq-category" data-category="tech">Technical</div>
      </div>

      <!-- FAQ Content -->
      <div id="faq-content">
        <!-- Events -->
        <div class="faq-section" data-category="events">
          <h3 class="faq-question" tabindex="0">How do I register for an event?</h3>
          <div class="faq-answer">
            <p><strong>Step 1:</strong> Browse events from the home page catalog</p>
            <p><strong>Step 2:</strong> Click any event card ‚Üí "Register" button</p>
            <p><strong>Step 3:</strong> Fill form ‚Üí Submit (payment if required)</p>
            <p><em>üí° Pro tip: Organizers can send direct registration links with pre-filled tier (single/duo/trio)</em></p>
          </div>
        </div>

        <div class="faq-section" data-category="tickets">
          <h3 class="faq-question" tabindex="0">Where is my e-ticket & QR code?</h3>
          <div class="faq-answer">
            <p>After <strong>payment verification by organizer</strong>, your e-ticket appears in:</p>
            <ul>
              <li><strong>Ticket Section</strong> ‚Üí Your registered events</li>
              <li>Contains <strong>QR code + event details + tagline</strong></li>
            </ul>
            <p><em>‚è∞ Takes 5-30 mins after payment approval</em></p>
          </div>
        </div>

        <div class="faq-section" data-category="tech">
          <h3 class="faq-question" tabindex="0">How do organizers scan attendance?</h3>
          <div class="faq-answer">
            <p>Organizers go to <strong>Attendance page</strong> ‚Üí paste QR payload or scan with camera.</p>
            <p><strong>Features:</strong></p>
            <ul>
              <li>Real-time check-in status</li>
              <li>Export attendance CSV</li>
              <li>Paid vs Free attendees tracking</li>
            </ul>
          </div>
        </div>

        <div class="faq-section" data-category="payments">
          <h3 class="faq-question" tabindex="0">Payment not working?</h3>
          <div class="faq-answer">
            <p><strong>Current status:</strong> Manual UPI/Bank transfer + organizer verification</p>
            <p><strong>Coming soon:</strong> Stripe/Razorpay auto-payments</p>
            <p><em>Organizers receive your payment proof ‚Üí approve ‚Üí ticket issued</em></p>
          </div>
        </div>

        <div class="faq-section" data-category="payments">
          <h3 class="faq-question" tabindex="0">How to enable Google/Stripe payments?</h3>
          <div class="faq-answer">
            <p>Admin sets these in <code>.env</code>:</p>
            <ul>
              <li><code>GOOGLE_CLIENT_ID</code> / <code>GOOGLE_CLIENT_SECRET</code></li>
              <li><code>STRIPE_SECRET_KEY</code></li>
              <li><code>RAZORPAY_KEY_ID</code> / <code>RAZORPAY_KEY_SECRET</code></li>
            </ul>
            <p><em>Restart server ‚Üí payments auto-enabled</em></p>
          </div>
        </div>

        <div class="faq-section" data-category="tech">
          <h3 class="faq-question" tabindex="0">Multi-language support?</h3>
          <div class="faq-answer">
            <p>‚úÖ <strong>Ready for i18n:</strong> Add <code>/assets/i18n/*.json</code> files</p>
            <p>Frontend detects language ‚Üí auto-switches content</p>
            <p><em>Hindi, Tamil, Telugu support planned</em></p>
          </div>
        </div>

        <!-- Contact fallback -->
        <div class="faq-section" style="border-top: 2px solid #eee; padding-top: 2rem;">
          <h3>Still need help?</h3>
          <p>Contact your event organizer or <a href="mailto:support@campusvibe.com">support@campusvibe.com</a></p>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Enhanced FAQ functionality
    document.addEventListener('DOMContentLoaded', () => {
      // Lottie animation
      try {
        if (window.lottie) {
          window.lottie.loadAnimation({
            container: document.getElementById('lottie-faq'),
            renderer: 'svg', loop: true, autoplay: true,
            path: '/assets/lottie/faq.json'
          });
        }
      } catch (e) { console.warn('Lottie FAQ failed:', e); }

      // FAQ accordion
      document.querySelectorAll('.faq-question').forEach(q => {
        q.addEventListener('click', () => toggleFAQ(q));
        q.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            toggleFAQ(q);
          }
        });
      });

      // Search functionality
      document.getElementById('faq-search').addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        document.querySelectorAll('.faq-section').forEach(section => {
          const text = section.textContent.toLowerCase();
          section.style.display = text.includes(term) ? 'block' : 'none';
        });
      });

      // Category filtering
      document.querySelectorAll('.faq-category').forEach(cat => {
        cat.addEventListener('click', () => {
          document.querySelectorAll('.faq-category').forEach(c => c.classList.remove('active'));
          cat.classList.add('active');
          
          const category = cat.dataset.category;
          document.querySelectorAll('.faq-section').forEach(section => {
            section.style.display = (category === 'all' || section.dataset.category === category) ? 'block' : 'none';
          });
        });
      });
    });

    function toggleFAQ(question) {
      const answer = question.nextElementSibling;
      const isOpen = answer.classList.contains('show');
      
      // Close all others
      document.querySelectorAll('.faq-answer.show').forEach(a => {
        a.classList.remove('show');
        a.previousElementSibling.setAttribute('aria-expanded', 'false');
      });
      
      // Toggle current
      if (!isOpen) {
        answer.classList.add('show');
        question.setAttribute('aria-expanded', 'true');
      }
    }
  </script>
</body>
</html>
